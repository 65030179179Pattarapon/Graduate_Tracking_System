<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>รายละเอียดเอกสาร - Graduate Tracker</title>
  <link rel="stylesheet" href="/User_Page/css_user/student_document_detail.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
  <link rel="icon" href="/assets/images/logo.png">
</head>
  <body>
    <nav>
      <a href="/User_Page/html_user/home.html" class="logo-link">
        <div class="logo">
          <img src="/assets/images/logo.png" alt="KMITL Logo" />
          <span>Graduate Tracking System</span>
        </div>
      </a>
      <ul class="nav-links">
        <li><a href="/User_Page/html_user/home.html"><i class="fas fa-home"></i> หน้าหลัก</a></li>
        <li><a href="/User_Page/html_user/status.html" class="active"><i class="fas fa-file-alt"></i> สถานะเอกสาร</a></li>
        <li class="dropdown">
          <a href="#" class="nav-dropdown-toggle"><i class="fas fa-edit"></i> กรอกแบบฟอร์ม <i class="fas fa-caret-down"></i></a>
          <ul class="dropdown-menu">
            <li class="dropdown-header">ขั้นการสอบหัวข้อและเค้าโครง</li>
              <li><a href="/User_Page/html_user/form1.html">แบบฟอร์มขอรับรองการเป็นอาจารย์ที่ปรึกษาวิทยานิพนธ์ หลัก/ร่วม</a></li>
              <li><a href="/User_Page/html_user/form2.html">แบบเสนอหัวข้อและเค้าโครงวิทยานิพนธ์ ระดับบัณฑิตศึกษา</a></li>
              <li><a href="/User_Page/html_user/form3.html">แบบนำส่งเอกสารหัวข้อและเค้าโครงวิทยานิพนธ์ 1 เล่ม</a></li>
              <li><a href="/User_Page/html_user/form4.html">แบบขอหนังสือเชิญเป็นผู้ทรงคุณวุฒิตรวจและประเมิน...เพื่อการวิจัย</a></li>
              <li><a href="/User_Page/html_user/form5.html">แบบขอหนังสือขออนุญาตเก็บรวบรวมข้อมูล (วิทยานิพนธ์)</a></li>
                
            <li class="dropdown-divider"></li> <li class="dropdown-header">ขั้นการสอบวิทยานิพนธ์ขั้นสุดท้าย</li>
              <li><a href="/User_Page/html_user/form6.html">บันทึกข้อความ เรื่อง ขอแต่งตั้งคณะกรรมการการสอบวิทยานิพนธ์ขั้นสุดท้าย</a></li>
          </ul>
        </li>
        <li><a href="/User_Page/html_user/eng.html"><i class="fas fa-language"></i> ยื่นผลสอบอังกฤษ</a></li>
        <li><a href="/User_Page/html_user/templates.html"><i class="fas fa-download"></i> ดาวน์โหลดเอกสาร</a></li>
        <li><a href="/User_Page/html_user/guide.html"><i class="fas fa-book-open"></i> คู่มือการใช้งาน</a></li>
      </ul>
      <div class="user-menu dropdown">
        <a href="#" class="nav-dropdown-toggle" id="user-profile-link">
          <span id="nav-username">กำลังโหลด...</span>
          <i class="fas fa-user-circle"></i>
          <i class="fas fa-caret-down"></i>
        </a>
        <ul class="dropdown-menu user-dropdown-menu">
          <li><a href="/User_Page/html_user/profile.html"><i class="fas fa-user-edit"></i> จัดการโปรไฟล์</a></li>
          <li><a href="#" id="logout-button"><i class="fas fa-sign-out-alt"></i> ออกจากระบบ</a></li>
        </ul>
      </div>
    </nav>

  <main class="detail-container">
    <!-- ==================== คอลัมน์ซ้าย (เนื้อหาหลัก) ==================== -->
    <div class="document-content">
      <div class="content-header">
        <h1 id="doc-title-heading">กำลังโหลดข้อมูลเอกสาร...</h1>
        <a href="/User_Page/html_user/status.html" class="back-link"><i class="fas fa-arrow-left"></i> กลับหน้ารวมสถานะ</a>
      </div>

      <!-- ส่วนนี้จะถูกสร้างโดย JavaScript ตามประเภทของฟอร์ม -->
      <div id="form-specific-content" class="detail-card">
        <p class="loading-text">กำลังโหลดรายละเอียด...</p>
      </div>

      <!-- เอกสารแนบ (จัดกลุ่มใหม่) -->
      <div class="detail-card">
        <h3><i class="fas fa-paperclip"></i> เอกสารแนบ</h3>
        <ul id="attached-files-list" class="file-list-detailed">
           <li class="loading-text">กำลังโหลดรายการไฟล์...</li>
        </ul>
      </div>
      
      <!-- ความคิดเห็นของนักศึกษา -->
      <div class="detail-card">
        <h3><i class="fas fa-user-pen"></i> ความคิดเห็นเพิ่มเติม (จากผู้ยื่น)</h3>
        <p id="student-comment-display" class="comment-box">ไม่มีความคิดเห็นเพิ่มเติม</p>
      </div>
    </div>

    <!-- ==================== คอลัมน์ขวา (Sidebar) ==================== -->
    <aside class="document-sidebar">
      <!-- กล่องสถานะหลัก -->
      <div id="status-highlight-card" class="status-card">
        <div id="status-icon" class="status-icon"><i class="fas fa-spinner fa-spin"></i></div>
        <div class="status-text">
          <p>สถานะปัจจุบัน</p>
          <h2 id="doc-status-main">กำลังโหลด...</h2>
        </div>
      </div>

      <!-- กล่องข้อมูลทั่วไป -->
      <div class="detail-card">
          <h3><i class="fas fa-info-circle"></i> ข้อมูลการยื่น</h3>
          <ul class="info-list">
              <li><label>ประเภทเอกสาร:</label> <span id="doc-type">-</span></li>
              <li><label>วันที่ยื่น:</label> <span id="doc-submission-date">-</span></li>
              <li><label>วันที่อนุมัติ:</label> <span id="doc-action-date"></span></li>
          </ul>
      </div>

      <!-- กล่องความคิดเห็นจากเจ้าหน้าที่ -->
      <div id="comment-card" class="detail-card" style="display: none;">
        <h3><i class="fas fa-comment-dots"></i> ความคิดเห็นจากเจ้าหน้าที่</h3>
        <p id="admin-comment-display" class="comment-box"></p>
      </div>
      
      <!-- กล่องปุ่มดำเนินการ (จะแสดงเมื่ออนุมัติแล้ว) -->
      <div id="action-card" class="detail-card" style="display: none;">
          <h3><i class="fas fa-print"></i> พิมพ์เอกสาร</h3>
          <div class="action-buttons">
              <button id="preview-btn" class="btn-secondary"><i class="fas fa-eye"></i> ดูตัวอย่าง</button>
              <button id="download-btn" class="btn-primary"><i class="fas fa-file-pdf"></i> ดาวน์โหลด (PDF)</button>
          </div>
      </div>
    </aside>
  </main>
  
  <div id="logout-confirm-modal" class="modal-overlay" style="display: none;">
    <div class="modal-box">
        <h3>ยืนยันการออกจากระบบ</h3>
        <p>คุณต้องการออกจากระบบใช่หรือไม่?</p>
        <div class="modal-actions">
            <button id="modal-cancel-btn" class="btn-secondary">ยกเลิก</button>
            <button id="modal-confirm-btn" class="btn-danger">ยืนยัน</button>
        </div>
    </div>
  </div>

  <script src="/User_Page/js_user/student_document_detail.js"></script>
</body>
</html>
