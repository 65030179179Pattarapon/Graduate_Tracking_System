<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>จัดการข้อมูลอาจารย์ - Admin</title>
    <link rel="stylesheet" href="/Admin_Page/css_admin/common.css" />
    <link rel="stylesheet" href="/Admin_Page/css_admin/manage_detail_advisor.css" /> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <link rel="icon" href="/assets/images/logo.png">
</head>
<body>
    <nav>
        <a href="/Admin_Page/html_admin/home.html" class="logo-link">
            <div class="logo">
                <img src="/assets/images/logo.png" alt="KMITL Logo" />
                <span>Graduate Tracking System (Admin)</span>
            </div>
        </a>
        <ul class="nav-links">
            <li><a href="/Admin_Page/html_admin/home.html"><i class="fas fa-home"></i> หน้าหลัก</a></li>
            <li><a href="/Admin_Page/html_admin/manage_user.html" class="active"><i class="fas fa-users-cog"></i> จัดการผู้ใช้งาน</a></li>
            <li><a href="#"><i class="fas fa-sitemap"></i> จัดการโครงสร้าง</a></li>
            <li><a href="#"><i class="fas fa-cog"></i> ตั้งค่าระบบ</a></li>
        </ul>
        <div class="user-menu dropdown">
            <a href="#" class="nav-dropdown-toggle" id="user-profile-link">
                <span id="nav-username">Admin</span><i class="fas fa-user-circle"></i><i class="fas fa-caret-down"></i>
            </a>
            <ul class="dropdown-menu user-dropdown-menu">
                <li><a href="#"><i class="fas fa-user-edit"></i> จัดการโปรไฟล์</a></li>
                <li><a href="#" id="logout-button"><i class="fas fa-sign-out-alt"></i> ออกจากระบบ</a></li>
            </ul>
        </div>
    </nav>

    <div class="admin-page-layout">
        <aside class="sidebar">
            <div class="sidebar-profile">
                <img src="/assets/images/advisors/placeholder.png" alt="รูปโปรไฟล์อาจารย์" id="sidebar-profile-img">
                <h4 id="sidebar-fullname">กำลังโหลด...</h4>
                <p id="sidebar-academic-position">กำลังโหลด...</p>
            </div>
            <button class="sidebar-btn active" data-section="account">
                <i class="fas fa-user-shield"></i> การจัดการบัญชี
            </button>
            <hr class="sidebar-divider">
            <button class="sidebar-btn" data-section="profile">
                <i class="fas fa-user-circle"></i> ข้อมูลทั่วไป
            </button>
            <button class="sidebar-btn" data-section="roles">
                <i class="fas fa-user-graduate"></i> บทบาทอาจารย์บัณฑิต
            </button>
            <button class="sidebar-btn" data-section="students">
                <i class="fas fa-users"></i> นักศึกษาที่รับผิดชอบ
            </button>
            <button class="sidebar-btn" data-section="publications">
                <i class="fas fa-book-open"></i> ผลงานทางวิชาการที่ได้รับการตีพิมพ์
            </button>
            <hr class="sidebar-divider">
            <a href="/Admin_Page/html_admin/manage_user.html" class="sidebar-btn">
                <i class="fas fa-arrow-left"></i> กลับหน้ารายชื่อ
            </a>
        </aside>

        <main class="main-content">
            <div class="main-header">
                <h1><i class="fas fa-edit"></i> จัดการข้อมูลอาจารย์</h1>
                <div class="action-buttons">
                    <button id="save-all-btn" class="btn-primary"><i class="fas fa-save"></i> บันทึกการเปลี่ยนแปลงทั้งหมด</button>
                </div>
            </div>

            <section id="section-account" class="content-section active">
                <div class="detail-card">
                    <h3><i class="fas fa-user-shield"></i> การจัดการบัญชี</h3>
                    
                    <div class="subsection">
                        <h5>ข้อมูลปัจจุบัน</h5>
                        <div class="form-grid two-cols">
                            <div class="form-group">
                                <label>อีเมล (สำหรับเข้าสู่ระบบ)</label>
                                <input type="email" id="current-email" disabled>
                            </div>
                            <div class="form-group">
                                <label>รหัสผ่านปัจจุบัน</label>
                                <div class="password-group">
                                    <input type="password" id="current-password" value="••••••••" disabled>
                                    <button id="toggle-current-password" class="btn-icon" title="แสดง/ซ่อนรหัสผ่าน">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr class="subtle-divider">

                    <div class="subsection">
                        <h5>แก้ไขข้อมูลบัญชี</h5>
                        <div class="form-grid single-col">
                            <div class="form-group">
                                <label>อีเมลใหม่</label>
                                <input type="email" id="new-email" placeholder="กรอกอีเมลใหม่ (ถ้าต้องการเปลี่ยน)">
                            </div>
                        </div>
                        <div class="form-grid two-cols">
                            <div class="form-group">
                                <label>รหัสผ่านใหม่</label>
                                <div class="password-group">
                                    <input type="text" id="new-password" placeholder="กดปุ่ม 'สร้าง' เพื่อสุ่มรหัสผ่านใหม่">
                                    <button id="generate-password-btn" class="btn-icon" title="สุ่มรหัสผ่านใหม่">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>ยืนยันรหัสผ่านใหม่</label>
                                <input type="text" id="confirm-password" placeholder="กรอกรหัสผ่านใหม่อีกครั้ง">
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="section-profile" class="content-section">
                <div class="detail-card">
                    <h3><i class="fas fa-user-circle"></i> ข้อมูลทั่วไป</h3>
                    
                    <div class="form-grid single-col">
                        <div class="form-group short-input">
                            <label>รหัสอาจารย์</label>
                            <input type="text" id="advisor-id" disabled>
                        </div>
                    </div>
                    
                    <div class="form-grid four-cols">
                        <div class="form-group"><label>คำนำหน้า (ไทย)</label><select id="prefix-th"></select></div>
                        <div class="form-group"><label>ชื่อ (ไทย)</label><input type="text" id="firstname-th"></div>
                        <div class="form-group"><label>ชื่อกลาง (ไทย)</label><input type="text" id="middlename-th" placeholder="(ถ้ามี)"></div>
                        <div class="form-group"><label>นามสกุล (ไทย)</label><input type="text" id="lastname-th"></div>
                    </div>
                    
                    <div class="form-grid four-cols">
                        <div class="form-group"><label>คำนำหน้า (อังกฤษ)</label><select id="prefix-en"></select></div>
                        <div class="form-group"><label>First Name (EN)</label><input type="text" id="firstname-en"></div>
                        <div class="form-group"><label>Middle Name (EN)</label><input type="text" id="middlename-en" placeholder="(Optional)"></div>
                        <div class="form-group"><label>Last Name (EN)</label><input type="text" id="lastname-en"></div>
                    </div>

                    <div class="form-grid four-cols">
                        <div class="form-group"><label>อีเมล</label><input type="email" id="contact-email"></div>
                        <div class="form-group"><label>เบอร์โทรศัพท์</label><input type="tel" id="phone"></div>
                        <div class="form-group"><label>เบอร์โทรสำรอง</label><input type="tel" id="backup-phone" placeholder="(ถ้ามี)"></div>
                        <div class="form-group">
                            <label>เพศ</label>
                            <select id="gender">
                                </select>
                            <input type="text" id="gender-other-input" class="hidden" placeholder="โปรดระบุ">
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="section-roles" class="content-section">
                <div class="detail-card">
                    <h3><i class="fas fa-sitemap"></i> บทบาทและการประจำหลักสูตร</h3>

                    <div class="form-group">
                        <label>อาจารย์ประจำหลักสูตร</label>
                        <div id="program-select-container">
                            </div>
                        <button type="button" id="add-program-btn" class="btn-add-more">
                            <i class="fas fa-plus-circle"></i> เพิ่มหลักสูตร
                        </button>
                    </div>

                    <div class="form-grid two-cols">
                        <div class="form-group">
                            <label>ประเภทของอาจารย์</label>
                            <select id="advisor-type" class="form-control">
                                </select>
                        </div>

                        <div class="form-group">
                            <label>บทบาทอาจารย์บัณฑิต (เลือกได้หลายข้อ)</label>
                            <div id="roles-checkbox-container" class="checkbox-group">
                                </div>
                        </div>
                    </div>
                    
                </div>
            </section>
            
            <section id="section-students" class="content-section">
                <div class="detail-card">
                    <h3><i class="fas fa-users"></i> นักศึกษาในที่ปรึกษา</h3>
                    <div class="table-container">
                        <table id="advised-students-table">
                            <thead>
                                <tr>
                                    <th>รหัสนักศึกษา</th>
                                    <th>ชื่อ-นามสกุล</th>
                                    <th>หลักสูตร</th>
                                    <th>บทบาท</th>
                                    <th>สถานะ</th>
                                </tr>
                            </thead>
                            <tbody id="advised-students-tbody">
                                </tbody>
                        </table>
                    </div>
                    <div class="pagination-controls" id="advised-students-pagination"></div>
                </div>
            </section>
            
            <section id="section-documents" class="content-section">
                <div class="detail-card">
                    <h3><i class="fas fa-paperclip"></i> เอกสารที่เกี่ยวข้อง (ไฟล์แนบ)</h3>
                    <div class="table-container">
                        <table id="attachments-table">
                            <thead>
                                <tr>
                                    <th>ชื่อเอกสาร</th>
                                    <th>วันที่อัปโหลด</th>
                                    <th>ไฟล์แนบ</th>
                                    <th>ลบ</th>
                                </tr>
                            </thead>
                            <tbody id="attachments-tbody">
                                </tbody>
                        </table>
                    </div>
                    <div class="pagination-controls" id="attachments-pagination"></div>
                    <button id="add-attachment-btn" class="btn-add-row"><i class="fas fa-plus"></i> เพิ่มเอกสารแนบ</button>
                </div>
            </section>

        </main>
    </div>

    <div id="logout-confirm-modal" class="modal-overlay" style="display: none;"></div>

    <script src="/Admin_Page/js_admin/common.js"></script>
    <script src="/Admin_Page/js_admin/manage_detail_advisor.js"></script>
</body>
</html>